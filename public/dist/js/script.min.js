$(document).ready(function(){$("input.date").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash"},format:"DD/MM/YYYY",defaultDate:$(this).val()}),$("input.time").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash"},format:"HH:mm",defaultDate:$(this).val()}),$("#start-pc").on("dp.change",function(a){var b=$(this).val(),c=b.split(":");console.log(c[0]+" | "+c[1]),$("#end-pc").data("DateTimePicker").date(a.date.add(3,"h"))}),$(".rte").summernote({height:300,toolbar:[["style",["style","bold","italic","underline","clear"]],["para",["ul","ol","paragraph"]],["insert",["link","hr"]]]}),$(".users_group").change(function(){var a=$(this).val();$.getJSON("/ajax/restarters_in_group",{group:a},function(a){var b="";a.forEach(function(a){b+='<div class="checkbox"><label for="users-'+a.id+'"><input type="checkbox" checked name="users[]" id="users-'+a.id+'" value="'+a.id+'"> '+a.name+" ("+a.role+")</label></div>"}),$(".users_group_list").html(b)})}),$('[name="repair_status"]').click(function(){$(this).is(":checked")&&"repair_status_2"==$(this).attr("id")?$("#repairable-details").slideDown("slow"):$("#repairable-details").hide("fast")}),$(".repairable").click(function(){var a=$(this).data("target-details");$(this).is(":checked")&&$(a).slideDown("slow")}),$(".delete-control").click(function(a){a.preventDefault();var b=$(this).attr("href"),c='<div class="ctrl-box-wrap"><div class="ctrl-box"><div class="ctrl-box-hdr"><h3>Are You Sure?<h3></div><div class="ctrl-box-body"><p>Please note that this operation is <strong>irreversible</strong>.</p></div><div class="ctrl-box-foot"><a href="'+b+'" class="btn btn-danger"><i class="fa fa-trash"></i> Delete</a> &nbsp;<a href="#" class="btn btn-default ctrl-box-close"><i class="fa fa-undo"></i> Cancel</a></div></div></div>';return $(".ctrl-box-wrap").length>0&&$(".ctrl-box-wrap").remove(),$("body").append(c),$(".ctrl-box-close").click(function(){$(".ctrl-box-wrap").remove()}),!1}),$(".switch-view").click(function(a){a.preventDefault();var b=$(this).data("target"),c=$(this).data("family");$(".switch-view").removeClass("active"),$(this).addClass("active"),$(c).removeClass("show").addClass("hide"),$(b).addClass("show")}),$(".party-switch").click(function(a){a.preventDefault();{var b=$(this).data("target");$(this).data("family")}$(".party-switch").removeClass("active"),$(this).addClass("active"),"all"==b?$(".party").addClass("show").removeClass("hide"):($(".party").removeClass("show").addClass("hide"),$(b).addClass("show"))}),$(".category-select").change(function(){"46"===$(this).val()?$(this).parent().next(".estimate-box").removeClass("hide").addClass("show"):$(this).parent().next(".estimate-box").removeClass("show").addClass("hide")}),$("#add-device").click(function(a){a.preventDefault();var b=$("#device-table > tbody > tr").length,c=null,d=b+1;$.ajax({async:!1,url:"/ajax/category_list",data:{},dataType:"html",success:function(a){c=a}});var e='<tr class="newdevice"><td>'+d+'.</td><td><div class="form-group"><select id="device['+d+'][category]" name="device['+d+'][category]" class="category-select selectpicker form-control" data-live-search="true" tite="Choose category..."><option></option>'+c+'<option value="46">None of the above...</option></select></div><div class="form-group hide estimate-box"><small>Please input an estimate weight (in kg)</small><input type="text" name="device['+d+'][estimate]" id="device['+d+'][estimate]" class="form-control" placeholder="Estimate..."></div></td><td><textarea class="form-control" id="device['+d+'][problem]" name="device['+d+'][problem]"></textarea></td><td><div class="form-group"><input type="text" name="device['+d+'][brand]" id="device['+d+'][brand]" class="form-control" placeholder="Brand..."></div><div class="form-group"><input type="text" name="device['+d+'][model]" id="device['+d+'][model]" class="form-control" placeholder="Model..."></div></td><td><div class="form-group"><div class="radio"><label><input type="radio" name="device['+d+'][repair_status]" id="device['+d+'][repair_status_1]" value="1" checked> Fixed</label></div><div class="radio"><label><input type="radio" class="repairable" data-target-details="#repairable-details['+d+']" name="device['+d+'][repair_status]" id="device['+d+'][repair_status_2]" value="2"> Repairable</label></div><div id="repairable-details['+d+']" class="repairable-details"><div class="checkbox"><label><input type="checkbox" name="device['+d+'][more_time_needed]" id="device['+d+'][more_time_needed]" value="1"> More time needed</label></div><div class="checkbox"><label><input type="checkbox" name="device['+d+'][professional_help]" id="device['+d+'][professional_help]" value="1"> Professional help</label></div><div class="checkbox"><label><input type="checkbox" name="device['+d+'][do_it_yourself]" id="device['+d+'][do_it_yourself]" value="1"> Do it yourself</label></div></div><div class="radio"><label><input type="radio" name="device['+d+'][repair_status]" id="device['+d+'][repair_status_3]" value="3"> End of lifecycle</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input type="hidden" name="device['+d+'][spare_parts]" id="device['+d+'][spare_parts_2]" value="2"><input type="checkbox" name="device['+d+'][spare_parts]" id="device['+d+'][spare_parts_1]" value="1"> Yes</label></div></div></td></tr>';$("#device-table tbody").append(e),$(".selectpicker").selectpicker(),$("tr.newdevice .category-select").change(function(){console.log($(this).val()),"46"===$(this).val()?$(this).parent().next(".estimate-box").removeClass("hide").addClass("show"):($(this).parent().next(".estimate-box").removeClass("show").addClass("hide"),$(this).parent().next(".estimate-box").children("input").val(""))}),$("tr.newdevice .repairable").click(function(){$(this).parent().parent().next(".repairable-details").addClass("show"),detailswrap.css({display:"block"})})}),$(".charts:first-child").addClass("show"),$(".charts:not(:first-child)").addClass("hide"),$("#device-table").length>0&&$("#device-table").floatThead(),$("#party-list").perfectScrollbar()});